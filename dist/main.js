(()=>{"use strict";const e=[];class t{constructor(e,n){this.id=Date.now().toString(),this.title=e,this.description=n,this.todos=[],this.isActive=t.setActive()}static setActive(){return e.forEach((e=>{e.isActive=!1})),!0}}const n=t,o=function(){const t=document.querySelector(".grid-left"),n=document.querySelector(".todos"),o=document.querySelector(".current-title"),c=document.querySelector(".current-description");function i(n){const i=document.createElement("div"),a=document.createElement("p"),l=document.createElement("a"),u=document.createElement("i");o.textContent=n.title,c.textContent=n.description,i.classList.add("project"),n.isActive&&i.classList.add("active"),a.classList.add("project-title"),l.classList.add("btn-trash"),u.className="fa-solid fa-trash-can",i.id=n.id,a.textContent=n.title,i.addEventListener("click",(e=>{"div"!==e.target.tagName.toLowerCase()&&"p"!==e.target.tagName.toLowerCase()||r(i,n)})),l.addEventListener("click",(t=>{"a"!==t.target.tagName.toLowerCase()&&"i"!==t.target.tagName.toLowerCase()||function(t,n){const{id:i}=n;let d;e.forEach(((t,n)=>{t.id===i&&(e.splice(n,1),d=e[n-1])}));const a=t.previousElementSibling;d&&a||(o.textContent="",c.textContent="",s(),t.remove()),r(a,d),t.remove()}(i,n)})),l.append(u),i.append(a,l),t.append(i),n.isActive&&n.todos.forEach((e=>{d(e)}))}function d(t){const o=document.createElement("li"),c=document.createElement("p"),i=document.createElement("h5"),d=document.createElement("i"),r=document.createElement("i");o.classList.add("todo"),d.className="fa-solid fa-pen todo-edit",r.className="fa-solid fa-trash todo-delete",o.id=t.id,c.textContent=t.title,i.textContent=t.date,d.addEventListener("click",(()=>{const e=document.createElement("input"),t=document.createElement("input");e.classList.add("input-edit"),t.classList.add("input-edit"),window.document.addEventListener("keydown",(n=>{if("Enter"===n.key){const n=e.value,a=t.value;if(!n||!a)return;c.textContent=n,i.textContent=a,e.remove(),t.remove(),o.append(c,i,d,r)}})),c.remove(),i.remove(),d.remove(),r.remove(),e.value=c.textContent,t.value=i.textContent,o.append(e,t)})),r.addEventListener("click",(()=>{!function(t,n){const{id:o}=n;e.forEach((e=>{e.todos.forEach(((t,n)=>{t.id===o&&e.todos.splice(n,1)}))})),t.remove()}(o,t)})),o.append(c,i,d,r),n.append(o)}function r(e,t){t.isActive||(a(),t.isActive=!0,e.classList.add("active"),function(e){o.textContent=e.title,c.textContent=e.description}(t),s(),t.todos.forEach((e=>{d(e)})))}function a(){const t=document.querySelectorAll(".project");e.forEach((e=>{e.isActive=!1})),t.forEach((e=>{e.classList.remove("active")}))}function s(){document.querySelectorAll(".todo").forEach((e=>{e.remove()}))}return{initialRender:function(){e.forEach((e=>{i(e)}))},renderProject:i,addTodoAndRender:function(t){0!==e.length&&(e.forEach((e=>{e.isActive&&e.todos.push(t)})),d(t))},addProjectAndRender:function(t){e.push(t),i(t)},removeActive:a,cleanTodos:s,switchProject:r}}();o.initialRender(),function(){const e=document.querySelector(".btn-add"),t=document.querySelector(".btn-new"),c=document.querySelector(".modal-project"),i=document.querySelector(".modal-todo"),d=document.querySelectorAll(".btn-cross"),r=document.querySelectorAll(".btn-submit"),a=document.querySelectorAll("form"),s=document.querySelector(".todo-title"),l=document.querySelector(".todo-date"),u=document.querySelector(".input-title"),m=document.querySelector(".input-description");function v(e){"i"===e.target.tagName.toLowerCase()?i.classList.remove("hide"):c.classList.remove("hide")}function f(e){e.preventDefault(),c.classList.add("hide"),i.classList.add("hide")}e.addEventListener("click",v),t.addEventListener("click",v),d.forEach((e=>{e.addEventListener("click",f)})),window.document.addEventListener("click",(e=>{e.target.classList.contains("modal")&&f(e)})),a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault()}))})),r.forEach((e=>{e.addEventListener("click",(e=>{if(e.target.classList.contains("btn-todo")){const t=s.value,n=l.value;if(!t||!n)return;const c=new class{constructor(e,t){this.id=Date.now().toString(),this.title=e,this.date=t}}(t,n);o.addTodoAndRender(c),s.value="",l.value="",f(e)}else{const t=u.value,c=m.value;if(!t||!c)return;o.removeActive(),o.cleanTodos();const i=new n(t,c);o.addProjectAndRender(i),u.value="",m.value="",f(e)}}))}))}()})();