(()=>{"use strict";const e=[];class t{constructor(e,o){this.id=Date.now().toString(),this.title=e,this.description=o,this.todos=[],this.isActive=t.setActive()}static setActive(){return e.forEach((e=>{e.isActive=!1})),!0}}const o=t,c=function(){const t=document.querySelector(".grid-left"),o=document.querySelector(".todos"),c=document.querySelector(".current-title"),n=document.querySelector(".current-description");function i(o){const i=document.createElement("div"),s=document.createElement("p"),a=document.createElement("a"),l=document.createElement("i");c.textContent=o.title,n.textContent=o.description,i.classList.add("project"),o.isActive&&i.classList.add("active"),s.classList.add("project-title"),a.classList.add("btn-trash"),l.className="fa-solid fa-trash-can",i.id=o.id,s.textContent=o.title,i.addEventListener("click",(e=>{"div"!==e.target.tagName.toLowerCase()&&"p"!==e.target.tagName.toLowerCase()||r(i,o)})),a.addEventListener("click",(t=>{"a"!==t.target.tagName.toLowerCase()&&"i"!==t.target.tagName.toLowerCase()||function(t,o){const{id:c}=o;e.forEach(((t,o)=>{t.id===c&&e.splice(o,1)})),t.previousElementSibling,console.log(e),t.remove()}(i,o)})),a.append(l),i.append(s,a),t.append(i),o.isActive&&o.todos.forEach((e=>{d(e)}))}function d(e){const t=document.createElement("li"),c=document.createElement("p"),n=document.createElement("h5"),i=document.createElement("i"),d=document.createElement("i");t.classList.add("todo"),i.className="fa-solid fa-pen todo-edit",d.className="fa-solid fa-trash todo-delete",t.id=e.id,c.textContent=e.title,n.textContent=e.date,t.append(c,n,i,d),o.append(t)}function r(e,t){t.isActive||(s(),t.isActive=!0,e.classList.add("active"),function(e){c.textContent=e.title,n.textContent=e.description}(t),a(),t.todos.forEach((e=>{d(e)})))}function s(){const t=document.querySelectorAll(".project");e.forEach((e=>{e.isActive=!1})),t.forEach((e=>{e.classList.remove("active")}))}function a(){document.querySelectorAll(".todo").forEach((e=>{e.remove()}))}return{initialRender:function(){e.forEach((e=>{i(e)}))},renderProject:i,addTodoAndRender:function(t){e.forEach((e=>{e.isActive&&e.todos.push(t)})),d(t)},addProjectAndRender:function(t){e.push(t),i(t)},removeActive:s,cleanTodos:a,switchProject:r}}();c.initialRender(),function(){const e=document.querySelector(".btn-add"),t=document.querySelector(".btn-new"),n=document.querySelector(".modal-project"),i=document.querySelector(".modal-todo"),d=document.querySelectorAll(".btn-cross"),r=document.querySelectorAll(".btn-submit"),s=document.querySelectorAll("form"),a=document.querySelector(".todo-title"),l=document.querySelector(".todo-date"),u=document.querySelector(".input-title"),m=document.querySelector(".input-description");function f(e){"i"===e.target.tagName.toLowerCase()?i.classList.remove("hide"):n.classList.remove("hide")}function v(e){e.preventDefault(),n.classList.add("hide"),i.classList.add("hide")}e.addEventListener("click",f),t.addEventListener("click",f),d.forEach((e=>{e.addEventListener("click",v)})),window.document.addEventListener("click",(e=>{e.target.classList.contains("modal")&&v(e)})),s.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault()}))})),r.forEach((e=>{e.addEventListener("click",(e=>{if(e.target.classList.contains("btn-todo")){const t=a.value,o=l.value;if(!t||!o)return;const n=new class{constructor(e,t){this.id=Date.now().toString(),this.title=e,this.date=t}}(t,o);c.addTodoAndRender(n),v(e)}else{const t=u.value,n=m.value;if(!t||!n)return;c.removeActive(),c.cleanTodos();const i=new o(t,n);c.addProjectAndRender(i),v(e)}}))}))}()})();